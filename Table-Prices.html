<!DOCTYPE html>
<html>
<head>
    <title>Price Comparison</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:400,700|Montserrat:400,700|Open+Sans:400,700|Lato:400,700|Source+Sans+Pro:400,700&display=swap">
    <style>
        body {
            background-color: whitesmoke;
            font-family: 'Roboto', sans-serif;
            text-align: center;
            margin: 20px;
        }

        h1, h2, h3, h4, h5, h6 {
         font-family: 'Montserrat', sans-serif;
        }
        
        table {
            border-collapse: collapse;
            width: 80%;
            margin: 20px auto;
        }
        
        th, td {
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
        .plus-product {
            display: inline-block;
            background-color: #4CAF50;
            color: white;
            padding: 6px 10px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
        }

        h1, h2, h3, h4, h5, h6 {
         font-family: 'Montserrat', sans-serif;
        }

    </style>
</head>
<body>
    <h1>Price Comparison</h1>
    <table>
        <tr>
            <th></th>
            <th>atmostech</th>
            <th>marocproduits</th>
            <th>micro-planet</th>
            <th>shoppingmaroc</th>
            <th>marocarduino</th>
            <th>moussasoft</th>
            <th>electromaroc</th>
            <th>microcell</th>
            <th>raspberry.ma</th>
            <th>electromashop.com</th>
            <th>shop4makers</th>
            <th>jumia</th>
        </tr>
        <tr>
            <td>Arduino Uno R3</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 2</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 3</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 4</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 5</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 6</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 7</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 8</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 9</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 10</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 11</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 12</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 13</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 14</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
        <tr>
            <td>Produit 15</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
        </tr>
    </table>
    <button class="plus-product" onclick="addRow()">+</button>
    <script>

        // Function to fetch and populate prices from the server
        async function fetchAndPopulatePrices() {
            try {
                const response = await fetch('/api/prices?productName=Arduino%20Uno%20R3');
                const data = await response.json();
                console.log(data); // Check if the data is correctly fetched from the server

                // Assuming the first column is for product names, starting from the second row (index 1)
                const table = document.querySelector('table');
                const rows = table.querySelectorAll('tr');
                for (let i = 1; i < rows.length; i++) {
                    const productName = rows[i].querySelector('td:first-child').innerText;
                    if (productName in data) {
                        const price = data[productName];
                        rows[i].querySelector('td:nth-child(2)').innerText = price;
                    }
                }
            } catch (error) {
                console.error('Error fetching prices:', error);
            }
        }

        // Call the function when the page loads to populate the prices
        fetchAndPopulatePrices();

        // Function to add a new row (you can keep your existing code)

        function addRow() {
            var table = document.querySelector("table");
            var newRow = table.insertRow(table.rows.length);
            
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            var cell4 = newRow.insertCell(3);
            var cell5 = newRow.insertCell(4);
            var cell6 = newRow.insertCell(5);
            var cell7 = newRow.insertCell(6);
            var cell8 = newRow.insertCell(7);
            var cell9 = newRow.insertCell(8);
            var cell10 = newRow.insertCell(9);
            var cell11 = newRow.insertCell(10);
            var cell12 = newRow.insertCell(11);
            var cell13 = newRow.insertCell(12);


            cell1.innerHTML = '<input type="text" name="new_product" placeholder="Enter product name">';
            cell2.innerHTML = '-';
            cell3.innerHTML = '-';
            cell4.innerHTML = '-';
            cell5.innerHTML = '-';
            cell6.innerHTML = '-';
            cell7.innerHTML = '-';
            cell8.innerHTML = '-';
            cell9.innerHTML = '-';
            cell10.innerHTML = '-';
            cell11.innerHTML = '-';
            cell12.innerHTML = '-';
            cell13.innerHTML = '-';
        }

    </script>
</body>
</html>
